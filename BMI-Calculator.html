<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BMI & Health Calculator</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" />
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
/* --- same styling as before --- */
:root{
  --primary-blue:#007bff;--light-blue:#e6f2ff;--white:#fff;
  --muted:#666;--success:#198754;--warning:#fd7e14;--danger:#dc3545;
}
*{box-sizing:border-box}body{font-family:Arial,Helvetica,sans-serif;background:var(--light-blue);
display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;margin:0}
.container{display:flex;flex-wrap:wrap;gap:20px;max-width:900px;width:100%}
.card{background:var(--white);border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,0.08);padding:18px}
.left{width:380px;flex-shrink:0}
h1{text-align:center;color:var(--primary-blue);font-size:1.3rem;margin-bottom:12px}
label{display:block;font-weight:600;margin-bottom:4px}
input,select{width:100%;padding:8px;border:1px solid #ccc;border-radius:6px;margin-bottom:10px}
.toggle{display:inline-flex;border:1px solid #d6e9ff;border-radius:8px;overflow:hidden;margin-bottom:8px}
.toggle button{padding:8px 10px;border:0;background:transparent;color:var(--primary-blue);cursor:pointer;font-weight:700}
.toggle button.active{background:var(--primary-blue);color:#fff}
button.primary{width:100%;padding:10px;border:0;background:var(--primary-blue);color:#fff;border-radius:8px;cursor:pointer}
.right{flex:1;min-width:260px}
.result-card{text-align:center;padding:18px;border-radius:12px;background:#fff}
.bmi-value{font-size:2rem;font-weight:900;margin-top:8px}
.category{font-weight:700;margin-top:4px}
.cat-under{color:var(--warning)}.cat-normal{color:var(--success)}
.cat-over{color:var(--warning)}.cat-obese{color:var(--danger)}
.range{color:#555;margin-top:6px}
.tips{text-align:left;border-top:1px dashed #ddd;margin-top:10px;padding-top:8px}
.tips ul{margin:6px 0 0 18px}
.download-row{display:flex;gap:8px;margin-top:12px}
.download-row button{flex:1;padding:8px;border-radius:8px;border:0;color:#fff;cursor:pointer}
.png{background:#0d6efd}.jpg{background:#20c997}
@media(max-width:900px){.container{flex-direction:column}.left{width:100%}}
</style>
</head>
<body>
<div class="container">
<div class="card left">
  <h1>BMI & Health Calculator</h1>
  <div class="toggle" id="unitToggle">
    <button data-unit="imperial" class="active">Imperial</button>
    <button data-unit="metric">Metric</button>
  </div>
  <label>Age</label><input id="age" type="number" placeholder="Years" />
  <label>Gender</label>
  <select id="gender">
    <option value="other">Other</option><option value="male">Male</option><option value="female">Female</option>
  </select>

  <div id="imp">
    <label>Weight (lbs)</label><input id="wImp" type="number" />
    <label>Height (ft/in)</label>
    <div style="display:flex;gap:6px">
      <input id="hFt" type="number" placeholder="ft" style="flex:1">
      <input id="hIn" type="number" placeholder="in" style="flex:1">
    </div>
  </div>
  <div id="met" style="display:none">
    <label>Weight (kg)</label><input id="wMet" type="number" />
    <label>Height (cm)</label><input id="hCm" type="number" />
  </div>

  <button class="primary" id="calcBtn">Calculate BMI</button>
</div>

<div class="card right" id="resultCard">
  <h2 style="color:var(--primary-blue)">Results</h2>
  <div id="summary">Enter your data above.</div>
  <div class="bmi-value" id="bmiValue">â€”</div>
  <div class="category" id="bmiCat">â€”</div>
  <div class="range" id="range">Healthy range: â€”</div>

  <div class="tips" id="tips">
    <h3>Diet & Exercise Suggestions</h3>
    <ul id="diet"></ul>
    <ul id="ex"></ul>
  </div>
  <div class="download-row">
    <button class="png" id="savePNG">Download PNG</button>
    <button class="jpg" id="saveJPG">Download JPG</button>
  </div>
</div>
</div>

<script>
let unit="imperial";
const unitToggle=document.getElementById("unitToggle");
unitToggle.addEventListener("click",e=>{
  const btn=e.target.closest("button");if(!btn)return;
  unit=btn.dataset.unit;
  document.getElementById("imp").style.display=unit==="imperial"?"":"none";
  document.getElementById("met").style.display=unit==="metric"?"":"none";
  unitToggle.querySelectorAll("button").forEach(b=>b.classList.toggle("active",b===btn));
});
const byId=id=>document.getElementById(id);
function calc(){
  const age=+byId("age").value||0;
  const gender=byId("gender").value;
  let bmi,minW,maxW;
  if(unit==="imperial"){
    const w=+byId("wImp").value,ft=+byId("hFt").value,inches=+byId("hIn").value;
    const total=(ft*12)+inches;if(!w||!total)return;
    bmi=(703*w)/(total*total);
    minW=18.5*(total*total)/703;maxW=24.9*(total*total)/703;
  }else{
    const w=+byId("wMet").value,cm=+byId("hCm").value;
    const m=cm/100;if(!w||!m)return;
    bmi=w/(m*m);minW=18.5*(m*m);maxW=24.9*(m*m);
  }
  const cat=bmi<18.5?["Underweight","ðŸ˜•","cat-under"]:bmi<25?["Normal","ðŸ˜Š","cat-normal"]:bmi<30?["Overweight","ðŸ˜","cat-over"]:["Obese","ðŸ˜Ÿ","cat-obese"];
  byId("summary").textContent=`Age: ${age||"â€”"} | Gender: ${gender}`;
  byId("bmiValue").textContent=bmi.toFixed(1);
  byId("bmiCat").textContent=`${cat[0]} ${cat[1]}`;
  byId("bmiCat").className=`category ${cat[2]}`;
  const unitLab=unit==="imperial"?"lbs":"kg";
  byId("range").textContent=`Healthy range: ${minW.toFixed(1)} â€“ ${maxW.toFixed(1)} ${unitLab}`;
  // suggestions
  const diet=[],ex=[];
  if(cat[0]==="Underweight"){diet.push("Add calorie-dense foods (nuts, grains, protein shakes).");ex.push("Strength training 3Ã—/week.");}
  if(cat[0]==="Normal"){diet.push("Maintain balanced meals with lean protein & veggies.");ex.push("Cardio + strength mix weekly.");}
  if(cat[0]==="Overweight"){diet.push("Moderate calorie deficit; reduce sugars.");ex.push("Cardio 30-60 min most days.");}
  if(cat[0]==="Obese"){diet.push("Structured diet under professional guidance.");ex.push("Low-impact cardio (walking, swim).");}
  if(age>60)ex.push("Add balance/mobility training.");
  byId("diet").innerHTML=diet.map(d=>`<li>${d}</li>`).join("");
  byId("ex").innerHTML=ex.map(d=>`<li>${d}</li>`).join("");
}
byId("calcBtn").onclick=calc;

// html2canvas download
function downloadImage(type){
  html2canvas(byId("resultCard"),{scale:2,backgroundColor:"#fff"}).then(c=>{
    const a=document.createElement("a");
    a.download= type==="png"?"bmi-result.png":"bmi-result.jpg";
    a.href= c.toDataURL(type==="png"?"image/png":"image/jpeg",0.92);
    a.click();
  });
}
byId("savePNG").onclick=()=>{calc();downloadImage("png")};
byId("saveJPG").onclick=()=>{calc();downloadImage("jpg")};
</script>
</body>
</html>
